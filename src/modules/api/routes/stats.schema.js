'use strict';
require('module-alias/register');
const test = require('ava');
const category = __filename.replace(process.cwd() + '/tests', '');

const Ajv = require('ajv');
// options can be passed, e.g. {allErrors: true}
const Stats = require('@scalapool/modules/api/routes/stats');
const stats = new Stats();
const CoinManager = require('@scalapool/core/coin_manager');

const schema = {
	type: 'object',
	required: ['config', 'network', 'pool', 'charts', 'market', 'coin'],
	properties: {
		miner: { type: 'object' },
		network: {
			type: 'object',
			properties: {
				height: { type: 'number' },
				difficulty: { type: 'number' }
			}
		},
		pool: { type: 'object' },
		charts: { type: 'object' },
		market: {
			type: 'object',
			properties: {
				tickers: {
					type: 'array'
				},
				data: {
					type: 'object'
				}
			}
		},
		coin: {
			type: 'object',
			required: [
			'name', 'units',
			'decimalPlaces', 'difficultyTarget',
			'symbol', 'depth'
			],
			properties : {
				name: { type: 'string' },
				units: { type: 'number' },
				decimalPlaces: { type: 'number' },
				difficultyTarget: { type: 'number' },
				symbol: { type: 'string' },
				depth: { type: 'number' }
			}
		},
		config: {
			type: 'object',
			required: [
			'supportedCoins',
			'supportedPayments', 'ports', 'hashrateWindow',
			'donations', 'devFee', 'networkFee', 'transferFee',
			'dynamicTransferFee', 'paymentsInterval', 'unlockBlockReward'
			],
			additionalProperties: false,
			properties: {
				supportedCoins: { type: 'array' },
				supportedPayments: { type: 'array' },
				ports: {
					type: 'array',
					items: {
						type: 'object',
						required: ['description', 'port', 'difficulty', 'donation', 'poolType'],
						properties: {
							description: { type: 'string' },
							port: { type: 'number' },
							donation: { type: 'number' },
							poolType: { type: 'string' },
							difficulty: {
								type: 'object'
							}
						}
					}
				},
				hashrateWindow: { type: 'number' },
				donations: { type: 'number' },
				devFee: { type: 'number' },
				networkFee: { type: 'number' },
				transferFee: { type: 'number' },
				dynamicTransferFee: { type: 'boolean' },
				paymentsInterval: { type: 'number' },
				minPaymentThreshold: { type: 'number' },
				maxPaymentThreshold: { type: 'number' },
				denominationUnit: { type: 'number' },
				blocksChartDays: { type: 'number' },
				unlockBlockReward: { type: 'number' }
			}
		}
	}
};
test(category + ' : schema', t => {
	const response = {
		coin: {
			name: 'Scala',
			units: 100,
			decimalPlaces: 2,
			difficultyTarget: 120,
			symbol: 'XLA',
			depth: 60,
			minPaymentThreshold: 5000,
			maxPaymentThreshold: 1000000,
			denominationUnit: 100
		},
		lastblock: {
			difficulty: 1380594820,
			height: 433032,
			timestamp: 1648268621,
			hash: "d03c4fe23169485b04436db311d53ef5af5c1de615b9c0fda86b3b828259616f"
		},
		network: {
			difficulty: 1403750086,
			height: 433033
		},
		market : {
			tickers : ['BTC','LTC','USD'],
			data : {
				BTC: {
					"price": 1.9585998549318396e-9,
					"volume_24h": 0.028321784842417076,
					"volume_change_24h": -45.5867,
					"percent_change_1h": -1.53964561,
					"percent_change_24h": 1.93472317,
					"percent_change_7d": -12.89027693,
					"percent_change_30d": -7.79001617,
					"percent_change_60d": -37.30831579,
					"percent_change_90d": -61.6030264,
					"market_cap": 19.98202541959194,
					"market_cap_dominance": 0,
					"fully_diluted_market_cap": 27.424704882708994,
					"last_updated": "2022-02-26T19:14:00.000Z"
				},
				LTC: {
					"price": 7.098742085444787e-7,
					"volume_24h": 10.264937245324925,
					"volume_change_24h": -45.5867,
					"percent_change_1h": -1.42091226,
					"percent_change_24h": 1.45703303,
					"percent_change_7d": -8.98745886,
					"percent_change_30d": -0.81472949,
					"percent_change_60d": -30.30902714,
					"percent_change_90d": -51.67213185,
					"market_cap": 7242.277918141742,
					"market_cap_dominance": 0,
					"fully_diluted_market_cap": 9939.799915821217,
					"last_updated": "2022-02-26T19:14:00.000Z"
				},
				USD: {
					"price": 0.0000767912705610825,
					"volume_24h": 1110.41866828,
					"volume_change_24h": -45.5867,
					"percent_change_1h": -1.45762917,
					"percent_change_24h": 3.33229576,
					"percent_change_7d": -14.66766591,
					"percent_change_30d": -0.31828747,
					"percent_change_60d": -48.31013193,
					"percent_change_90d": -72.42215971,
					"market_cap": 783439.8213042407,
					"market_cap_dominance": 0,
					"fully_diluted_market_cap": 1075246.65,
					"last_updated": "2022-02-26T19:13:00.000Z"
				},
				EUR: {
					"price": 0.0000681256828433466,
					"volume_24h": 985.1123632392753,
					"volume_change_24h": -45.5867,
					"percent_change_1h": -1.62153949,
					"percent_change_24h": 2.59624465,
					"percent_change_7d": -16.01072993,
					"percent_change_30d": -0.31828747,
					"percent_change_60d": -48.31013193,
					"percent_change_90d": -72.42215971,
					"market_cap": 695031.7712293424,
					"market_cap_dominance": 0,
					"fully_diluted_market_cap": 953909.3665341,
					"last_updated": "2022-02-26T19:14:13.000Z"
				}
			},
			last_updated: 1645902888781

		},
		config: {
			supportedCoin : ['xla', 'veil', 'rtm','btc'],
			supportedPayments: ['props','solo'],
			ports: [
			{
				port: 3333,
				difficulty: {
					'xla:panthera': 10000,
					'veil:x16rt' : 10000,
					'rtm:ghostrider' : 100000
				},
				description: 'Props Low End',
				poolType: 'props',
				donation: 0
			},
			{
				port: 8888,
				difficulty: {
					'xla:panthera': 250000,
					'veil:x16rt' : 250000,
					'rtm:ghostrider' : 250000
				},
				description: 'Solo Miner',
				poolType: 'solo',
				donation: 0
			}
			],
			hashrateWindow: 600,
			donations: 0,
			devFee: 0,
			networkFee: 0,
			version: '2.0.0',
			paymentsInterval: 300,
			transferFee: 0,
			dynamicTransferFee: true,
			unlockBlockReward: 0
		},
		charts: {
			difficulty: [
			"1648183918:3.3997924551769125e+27:31",
			"1648185778:3.514520197125646e+27:31",
			"1648187638:3.506595432609562e+27:31",
			"1648189498:3.4458608261461964e+27:31",
			"1648191358:3.2776713971072276e+27:31",
			"1648193218:3.427208680987882e+27:31",
			"1648195078:335526510366885950:30",
			"1648196879:3.14438319028377e+25:31",
			"1648198738:3.2437036971008106e+27:31",
			"1648200599:3.2872682454900175e+27:31",
			"1648202458:3.142585470884521e+25:31",
			"1648204318:3.673597919725195e+27:31",
			"1648206178:3.470556477766411e+27:31",
			"1648208038:3.3592436261454285e+27:31",
			"1648209898:3.3805968874348337e+27:31",
			"1648211758:362692328036269250:30",
			"1648213559:3.6383044519748436e+27:31",
			"1648215418:3.522961816481328e+27:31",
			"1648217278:3.445914335833246e+27:31",
			"1648219138:3.4688434197061627e+27:31",
			"1648220998:3.543818990678725e+27:31",
			"1648222858:3.5536300648714923e+27:31",
			"1648224718:3.3790974003379094e+27:31",
			"1648226578:3.7011679390844535e+27:31",
			"1648228438:406054858373938800:30",
			"1648230239:3.686195613269833e+27:31",
			"1648232098:3.6920761584337236e+27:31",
			"1648233958:3.753941390684859e+27:31",
			"1648235818:3.9591580197507544e+27:31",
			"1648237679:3.9581518132990405e+27:31",
			"1648239538:3.8547926326435435e+27:31",
			"1648241398:411941935707860860:30",
			"1648243199:3.832945248772477e+27:31",
			"1648245058:413645946708031300:30",
			"1648246859:3.9565646713660924e+27:31",
			"1648248718:3.988112368140746e+27:31",
			"1648250578:3.8845264261949046e+27:31",
			"1648252438:426031779043261400:30",
			"1648254239:4.3592320101133426e+27:31",
			"1648256098:3.993581300399358e+27:31",
			"1648257959:4.231329755261842e+27:31",
			"1648259818:4.3085276617211757e+27:31",
			"1648261678:3.984268184272741e+27:31",
			"1648263538:4.06711080041285e+27:31",
			"1648265398:424924742709159100:30",
			"1648267199:4.528226048839919e+27:31",
			"1648269058:null:8"
			],
			hashrate: [
			"1648183678:884664:31",
			"1648185538:886996:31",
			"1648187398:887676:31",
			"1648189259:893278:31",
			"1648191118:848798:31",
			"1648192978:843806:31",
			"1648194838:832054:31",
			"1648196698:844452:31",
			"1648198558:855145:31",
			"1648200418:844245:31",
			"1648202278:865097:31",
			"1648204138:837803:31",
			"1648205998:852302:31",
			"1648207858:845332:31",
			"1648209719:835055:31",
			"1648211579:844461:31",
			"1648213438:865535:31",
			"1648215298:842424:31",
			"1648217158:848882:30",
			"1648218959:858461:31",
			"1648220818:851674:31",
			"1648222678:860890:31",
			"1648224539:860260:31",
			"1648226399:853437:31",
			"1648228258:858625:31",
			"1648230119:847168:31",
			"1648231978:865382:31",
			"1648233838:847945:31",
			"1648235698:849493:31",
			"1648237558:885515:31",
			"1648239418:887237:31",
			"1648241278:881975:31",
			"1648243138:880149:31",
			"1648244999:880668:31",
			"1648246859:911487:31",
			"1648248718:911786:31",
			"1648250578:896182:31",
			"1648252438:881158:30",
			"1648254239:911763:31",
			"1648256098:916856:31",
			"1648257959:909388:31",
			"1648259818:890657:31",
			"1648261678:904779:31",
			"1648263538:911439:31",
			"1648265398:919122:30",
			"1648267199:940332:31",
			],
			workers: [
			"1648183918:686:31"
			"1648185778:684:31"
			"1648187638:677:31"
			"1648189498:681:31"
			"1648191358:680:31"
			"1648193218:678:31"
			"1648195078:662:30"
			"1648196879:666:31"
			"1648198738:661:31"
			"1648200599:659:31"
			"1648202458:657:31"
			"1648204318:664:31"
			"1648206178:661:31"
			"1648208038:653:31"
			"1648209898:666:31"
			"1648211758:678:30"
			"1648213559:680:31"
			"1648215418:669:31"
			"1648217278:668:31"
			"1648219138:679:31"
			"1648220998:678:31"
			"1648222858:668:31"
			"1648224718:664:31"
			"1648226578:667:31"
			"1648228438:665:30"
			"1648230239:664:31"
			"1648232098:663:31"
			"1648233958:659:31"
			"1648235818:660:31"
			"1648237679:672:31"
			"1648239538:677:31"
			"1648241398:674:30"
			"1648243199:685:31"
			"1648245058:684:30"
			"1648246859:687:31"
			"1648248718:693:31"
			"1648250578:680:31"
			"1648252438:694:30"
			"1648254239:700:31"
			"1648256098:708:31"
			"1648257959:701:31"
			"1648259818:700:31"
			"1648261678:691:31"
			"1648263538:687:31"
			"1648265398:702:30"
			"1648267199:714:31"
			"1648269058:707:8"
			],
			miners: [
			"1648183678:377:31",
			"1648185538:386:31",
			"1648187398:382:31",
			"1648189259:374:31",
			"1648191118:378:31",
			"1648192978:375:31",
			"1648194838:371:31",
			"1648196698:372:31",
			"1648198558:366:31",
			"1648200418:367:31",
			"1648202278:359:31",
			"1648204138:366:31",
			"1648205998:362:31",
			"1648207858:356:31",
			"1648209719:357:31",
			"1648211578:366:30",
			"1648213379:369:31",
			"1648215238:357:31",
			"1648217098:355:31",
			"1648218959:355:31",
			"1648220818:369:31",
			"1648222678:368:31",
			"1648224539:368:31",
			"1648226399:363:31",
			"1648228258:368:31",
			"1648230119:372:31",
			"1648231978:371:31",
			"1648233838:367:31",
			"1648235698:369:31",
			"1648237558:373:31",
			"1648239418:379:31",
			"1648241278:373:31",
			"1648243138:373:31",
			"1648244999:380:31",
			"1648246859:382:31",
			"1648248718:381:31",
			"1648250578:379:31",
			"1648252438:376:30",
			"1648254239:385:31",
			"1648256098:395:31",
			"1648257959:393:31",
			"1648259818:389:31",
			"1648261678:389:31",
			"1648263538:389:31",
			"1648265398:391:30",
			"1648267199:401:31",
			"1648269058:396:8",
			],
			price: 
			{
				LTC : [
				"1646922816:0.00039178864605647146:7",
				"1646935416:0.00039292591320842866:7",
				"1646948016:0.0003940845935286143:7",
				"1646960616:0.0003866961989645715:7",
				"1646973216:0.0003878841397388714:7",
				"1646985816:0.00039060595610175715:7",
				"1646998416:0.0003966171162595429:7",
				"1647011016:0.0003891325942640143:7",
				"1647023616:0.0003875961791316857:7",
				"1647036216:0.00038939733714400004:7",
				"1647048816:0.0003916898044289:7",
				"1647061416:0.0003914194999038429:7",
				"1647074016:0.00039183003126882864:7",
				"1647086616:0.00039089094736221425:7",
				"1647099216:0.00039104093430252857:7",
				"1647111816:0.00039103744177905713:7",
				"1647124416:0.00039008971379420006:7",
				"1647137016:0.00039158584788495714:7",
				"1647149616:0.0003915241261886142:7",
				"1647162216:0.0003897237021019143:7",
				"1647174816:0.00038781780082218574:7",
				"1647187416:0.0003896978580898142:7",
				"1647200016:0.00038771018870444295:7",
				"1647212616:0.00037818226280294:5",
				"1647224396:0.00038256107182039995:6",
				"1647235627:0.0003874185091274286:7",
				"1647248227:0.0003907538993683:7",
				"1647260827:0.00038886417042310005:7",
				"1647273427:0.0003880450388667286:7",
				"1647286027:0.0003882931311986571:7",
				"1647298627:0.00039395245390181423:7",
				"1647311227:0.0003886317049328714:7",
				"1647323827:0.0003859449555376143:7",
				"1647336427:0.0003865500089531144:7",
				"1647349027:0.0003891271085938333:6",
				"1647361551:0.00039312830186842866:7",
				"1647374151:0.0003955503563544429:7",
				"1647386751:0.0003963373535241143:7",
				"1647399351:0.0003946161705742429:7",
				"1647411951:0.00039791656673808566:7",
				"1647424551:0.0004047243894733428:7",
				"1647437151:0.0004064516032101143:7",
				"1647449751:0.00040301569163648566:7",
				"1647462351:0.0004113693474164715:7",
				"1647474951:0.00041053306585081426:7",
				"1647487551:0.00041097435087501664:6",
				"1647498352:0.00040864837971322853:7",
				"1647510951:0.0004080076224601857:7",
				"1647523551:0.0004101237460812:1"
				],
				BTC : [
				"1646922816:0.00039178864605647146:7",
				"1646935416:0.00039292591320842866:7",
				"1646948016:0.0003940845935286143:7",
				"1646960616:0.0003866961989645715:7",
				"1646973216:0.0003878841397388714:7",
				"1646985816:0.00039060595610175715:7",
				"1646998416:0.0003966171162595429:7",
				"1647011016:0.0003891325942640143:7",
				"1647023616:0.0003875961791316857:7",
				"1647036216:0.00038939733714400004:7",
				"1647048816:0.0003916898044289:7",
				"1647061416:0.0003914194999038429:7",
				"1647074016:0.00039183003126882864:7",
				"1647086616:0.00039089094736221425:7",
				"1647099216:0.00039104093430252857:7",
				"1647111816:0.00039103744177905713:7",
				"1647124416:0.00039008971379420006:7",
				"1647137016:0.00039158584788495714:7",
				"1647149616:0.0003915241261886142:7",
				"1647162216:0.0003897237021019143:7",
				"1647174816:0.00038781780082218574:7",
				"1647187416:0.0003896978580898142:7",
				"1647200016:0.00038771018870444295:7",
				"1647212616:0.00037818226280294:5",
				"1647224396:0.00038256107182039995:6",
				"1647235627:0.0003874185091274286:7",
				"1647248227:0.0003907538993683:7",
				"1647260827:0.00038886417042310005:7",
				"1647273427:0.0003880450388667286:7",
				"1647286027:0.0003882931311986571:7",
				"1647298627:0.00039395245390181423:7",
				"1647311227:0.0003886317049328714:7",
				"1647323827:0.0003859449555376143:7",
				"1647336427:0.0003865500089531144:7",
				"1647349027:0.0003891271085938333:6",
				"1647361551:0.00039312830186842866:7",
				"1647374151:0.0003955503563544429:7",
				"1647386751:0.0003963373535241143:7",
				"1647399351:0.0003946161705742429:7",
				"1647411951:0.00039791656673808566:7",
				"1647424551:0.0004047243894733428:7",
				"1647437151:0.0004064516032101143:7",
				"1647449751:0.00040301569163648566:7",
				"1647462351:0.0004113693474164715:7",
				"1647474951:0.00041053306585081426:7",
				"1647487551:0.00041097435087501664:6",
				"1647498352:0.00040864837971322853:7",
				"1647510951:0.0004080076224601857:7",
				"1647523551:0.0004101237460812:1"
				],
				USD: [
				"1646922816:0.00039178864605647146:7",
				"1646935416:0.00039292591320842866:7",
				"1646948016:0.0003940845935286143:7",
				"1646960616:0.0003866961989645715:7",
				"1646973216:0.0003878841397388714:7",
				"1646985816:0.00039060595610175715:7",
				"1646998416:0.0003966171162595429:7",
				"1647011016:0.0003891325942640143:7",
				"1647023616:0.0003875961791316857:7",
				"1647036216:0.00038939733714400004:7",
				"1647048816:0.0003916898044289:7",
				"1647061416:0.0003914194999038429:7",
				"1647074016:0.00039183003126882864:7",
				"1647086616:0.00039089094736221425:7",
				"1647099216:0.00039104093430252857:7",
				"1647111816:0.00039103744177905713:7",
				"1647124416:0.00039008971379420006:7",
				"1647137016:0.00039158584788495714:7",
				"1647149616:0.0003915241261886142:7",
				"1647162216:0.0003897237021019143:7",
				"1647174816:0.00038781780082218574:7",
				"1647187416:0.0003896978580898142:7",
				"1647200016:0.00038771018870444295:7",
				"1647212616:0.00037818226280294:5",
				"1647224396:0.00038256107182039995:6",
				"1647235627:0.0003874185091274286:7",
				"1647248227:0.0003907538993683:7",
				"1647260827:0.00038886417042310005:7",
				"1647273427:0.0003880450388667286:7",
				"1647286027:0.0003882931311986571:7",
				"1647298627:0.00039395245390181423:7",
				"1647311227:0.0003886317049328714:7",
				"1647323827:0.0003859449555376143:7",
				"1647336427:0.0003865500089531144:7",
				"1647349027:0.0003891271085938333:6",
				"1647361551:0.00039312830186842866:7",
				"1647374151:0.0003955503563544429:7",
				"1647386751:0.0003963373535241143:7",
				"1647399351:0.0003946161705742429:7",
				"1647411951:0.00039791656673808566:7",
				"1647424551:0.0004047243894733428:7",
				"1647437151:0.0004064516032101143:7",
				"1647449751:0.00040301569163648566:7",
				"1647462351:0.0004113693474164715:7",
				"1647474951:0.00041053306585081426:7",
				"1647487551:0.00041097435087501664:6",
				"1647498352:0.00040864837971322853:7",
				"1647510951:0.0004080076224601857:7",
				"1647523551:0.0004101237460812:1"
				],
				EUR : [
				"1646922816:0.00039178864605647146:7",
				"1646935416:0.00039292591320842866:7",
				"1646948016:0.0003940845935286143:7",
				"1646960616:0.0003866961989645715:7",
				"1646973216:0.0003878841397388714:7",
				"1646985816:0.00039060595610175715:7",
				"1646998416:0.0003966171162595429:7",
				"1647011016:0.0003891325942640143:7",
				"1647023616:0.0003875961791316857:7",
				"1647036216:0.00038939733714400004:7",
				"1647048816:0.0003916898044289:7",
				"1647061416:0.0003914194999038429:7",
				"1647074016:0.00039183003126882864:7",
				"1647086616:0.00039089094736221425:7",
				"1647099216:0.00039104093430252857:7",
				"1647111816:0.00039103744177905713:7",
				"1647124416:0.00039008971379420006:7",
				"1647137016:0.00039158584788495714:7",
				"1647149616:0.0003915241261886142:7",
				"1647162216:0.0003897237021019143:7",
				"1647174816:0.00038781780082218574:7",
				"1647187416:0.0003896978580898142:7",
				"1647200016:0.00038771018870444295:7",
				"1647212616:0.00037818226280294:5",
				"1647224396:0.00038256107182039995:6",
				"1647235627:0.0003874185091274286:7",
				"1647248227:0.0003907538993683:7",
				"1647260827:0.00038886417042310005:7",
				"1647273427:0.0003880450388667286:7",
				"1647286027:0.0003882931311986571:7",
				"1647298627:0.00039395245390181423:7",
				"1647311227:0.0003886317049328714:7",
				"1647323827:0.0003859449555376143:7",
				"1647336427:0.0003865500089531144:7",
				"1647349027:0.0003891271085938333:6",
				"1647361551:0.00039312830186842866:7",
				"1647374151:0.0003955503563544429:7",
				"1647386751:0.0003963373535241143:7",
				"1647399351:0.0003946161705742429:7",
				"1647411951:0.00039791656673808566:7",
				"1647424551:0.0004047243894733428:7",
				"1647437151:0.0004064516032101143:7",
				"1647449751:0.00040301569163648566:7",
				"1647462351:0.0004113693474164715:7",
				"1647474951:0.00041053306585081426:7",
				"1647487551:0.00041097435087501664:6",
				"1647498352:0.00040864837971322853:7",
				"1647510951:0.0004080076224601857:7",
				"1647523551:0.0004101237460812:1"
				]
			},
			blocks: [
			"432999:276a132ddda1eb05667765cbf2a2152eb00096478cc86ca638ffa9ccfe1996a3:1648265335:1279833428:740065064:0:375000:Svm46Pk...yJTE5jg:props:0:false",
			"432990:91cadbc92f23da84aafc41fcf71a40cd4237d83eb7eb4d0f7d96ee2a2d5663b3:1648264473:1242940583:2230552017:0:375100:SvkAuor...Rm2eJ3z:props:0:false",
			"432969:22d3db40f2154b182f66f6c9149c1ee43367a8c60a5fd316515919422d7f4d48:1648261884:1237699045:1296318554:0:375000:SvkxRjG...4DuEPAC:props:0:true",
			"432959:59d466c01e604077050456b82b19dbe48c3501b0e4cc3b4b20f091795d884e1c:1648260674:1252471361:14525848070:0:375000:Svm39SS...8pERSW4:solo:0:true",
			"432955:db0332f4011492afb466fbc10e2d8b38a9e3dc3495d4aef3d745497e59484cb3:1648260345:1303082389:687655711:0:375090:SvmNxmw...vMH5oJk:props:0:true",
			"432950:93872f5d1edf637797f7e4fafc6be249c2303e0b58cd384b9e7907643334f142:1648259502:1314005537:312147989:0:375000:Svm46Pk...yJTE5jg:props:0:true",
			"432948:3b2881175d1c7663ea5ed2a9bee034bf321e4dadc696d7518364b51a3ffcf9f4:1648259136:1308804933:294602539:0:375140:SvmaJAx...YQwWnfd:props:0:true",
			"432945:9226c3ea02d61dcde7e587b1304b2fbe8d9e85f1d6a8a6f8d215acf1bb0511ed:1648258790:1281735346:744914229:0:375000:Svkfx6u...QSsatxg:props:0:true",
			"432933:9d064b1b26e48b9f6b2818193fe621ff0b264b57535c10e6835a80e1fe382198:1648257922:1250418823:1801525636:0:375000:SvmAb8m...Fkw9Eu2:props:0:true",
			"432922:8c2c8fd1598a3802b9360111f425398f193585cacc18e596d687582cdec75ecc:1648255842:1394387312:841432557:0:375000:SvjkE8X...6hFQM1a:props:0:true",
			"432913:5f81248f0b6c03e90b3b1979c83dee86deccf350832a6302bc9bd7710de0445c:1648254865:1313061709:4411263592:0:375090:Svm46Pk...yJTE5jg:props:0:true",
			"432865:175e85c20cf56841c85b79e9bcbc40c7a675f29d294ac0fdb737de7fd57f3b00:1648249636:1209198567:3475861011:0:375000:SvmNxmw...vMH5oJk:props:0:true",
			"432847:917bc6c77b032751d42bf45c196cf99af5ff3e70dd9197eef0f57f1935bfc01f:1648247536:1206716577:808906970:0:375000:SvkmzV7...EHtmyi4:solo:0:true",
			"432830:90edf9a63bc5e98979111d01d6fc59e48c285550aefd46e9e4dfc177cfbe56b2:1648245558:1193144451:1017779785:0:375000:Svm46Pk...yJTE5jg:props:0:true",
			"432823:69ab37e89d3db79da57feca013d237574726f2aa67d13ab070b17e7b544c6a1b:1648244835:1182813987:994848870:0:375000:Ssy2RuQ...dAd9V7z:solo:0:true",
			"432819:07187ce0fba919252e6643998fe1364db786b70137b6e5287e67e2dcd3770de4:1648244334:1228309863:426978832:0:375120:SvkZyWo...jFTSng2:props:0:true",
			"432816:14817dac4abb58e750df905b914b9808e4c784ec3b85a8e1ef750d64efb3bbdf:1648243821:1225753796:2010070299:0:375000:SvmJ584...rbSbF4c:props:0:true",
			"432803:18f8477a90608cc9048aaca6bb0d415ca2fbee06db3797c5708a53f346fb66ed:1648242437:1183688255:38796210740:0:375000:SvmRhbu...5gzPTqA:solo:0:true",
			"432794:bc9e0c4e82e61dda7c23e45c3846f5e84e570df4e6cefaaca78bc09e01db50fc:1648241392:1185724763:1125945357:0:375050:Ssy2QK5...Uezs9h8:props:0:true",
			"432786:82744e0dcfbe6cd319204d107f9dcb971f28daf76342ffc1e7e440269471e839:1648240062:1224587677:119938880:0:375000:SvmV3aG...4Zz4nuy:props:0:true",
			"432783:89af1a15bbb32a119c7ab365c4788564052a31838f32d12698c1c0ea5d421ff6:1648239922:1221013817:280051098:0:375000:SvmNxmw...vMH5oJk:props:0:true",
			"432780:c57143e5a71245de2817c52b41a8fc3d1d8d575b62f7c18bca4c5e07c9112494:1648239596:1227027067:2048428733:0:375000:SvmNxmw...vMH5oJk:props:0:true",
			"432776:4aebc0f56a7c0b45d1c883472d6722085323bc1f8a583d6e024a0ed2c4b05c7b:1648239124:1195253506:10966170940:0:375000:SvkmzV7...EHtmyi4:solo:0:true",
			"432759:d3349c13733ed20d6bf5b762ce80fb574eb4631f72dc80b09e9b8d1cc06fab02:1648237111:1207869044:4058771458:0:375000:Svm46Pk...yJTE5jg:props:0:true",
			"432742:c7422d8e304e2c8d9f927e819e41c026dff560b93b69c71b529d611457889846:1648235574:1150010489:5685262790:0:375000:Ssy2RuQ...dAd9V7z:solo:0:true",
			"432714:a9199ee85481f9dbececeea1efd616f90f32b3f494feb5b91a969e8d2ca87776:1648232069:1136483063:264466976:0:375030:SvjgmVc...r2995wK:props:0:true",
			"432711:28c4dd91353aaa7cd880b8a978ca182efc0f35bb22006db9e846e1cb9658b78c:1648231737:1163416590:2278924379:0:375180:SvmFdwY...m8GKbVR:props:0:true",
			"432689:571447465ff97c12e8c03b5751478be2ede6d77509b055a92fa2c8b6d9b6af4b:1648228893:1181474662:205877123:0:375000:SvmVyrK...dBCDmnQ:props:0:true",
			"432687:fa6b668551be6e2b9b661e0ca3289affdfe6b67519c16326f29e82db31caaefa:1648228644:1155272000:408265508:0:375000:Svm46Pk...yJTE5jg:props:0:true",
			"432682:b41a96a45e256ad0790a6e075afd3406c4c0f0e5b5771adf85de2b4c39267514:1648228157:1163664209:1419063341:0:377160:SvmNxmw...vMH5oJk:props:0:true",
			"432662:7ce40ad8a198fc0bcf14aadc82ab147eec8356afd6e665ea7c8408c63f72e45a:1648226379:1040969035:2319597708:0:375000:Svm46Pk...yJTE5jg:props:0:true",
			"432642:cff350371b3611d0a95c1629bb597ee21c27df99ae322c41ed6e47c9f21177d8:1648223508:1120691947:819270443:0:375000:SvmNxmw...vMH5oJk:props:0:true"
			],
			payments: [
				//hash:amount:fee:mixin:recipients:timestamp
				"44b5cf199b045925e2875870f5e75744e4bea5cd5590e0a3e94f4c4f3fd224ac:38679:120:9:4:1648268769",
				"a9b838b908d22d68fdaa2d37e62eb2eb35a8d4e6a21022e5327963955e384d46:105033:160:9:15:1648268765",
				"91056f34c3347fac29370c640babb4f9047eeadab797147739299d7f624d16cf:98032:160:9:15:1648268757",
				"e5585ca7423142e01c373515bdc6cf542c980766bc2635f8a97b24b7f50fe19d:56178:120:9:7:1648268138",
				"79a6a71b2c9beee20838ecc8ca633ab0aa43c120c9d3c9a98ed1e874b46169b2:560469:120:9:15:1648268135",
				"a4e298819d5764867c2a59242bc86418023ea1c9e0c593d9c2efbbd34f1a76d2:292034:160:9:15:1648268129",
				"279812a87ff74820e0e9884b6c20fa0cce9e8dd856e43914376933caf236921c:24477:120:9:4:1648267820",
				"7019f455a2a3bf7db7e620b53af54cb388986238e9757df3a7722b7f408fc3f9:116134:200:9:15:1648267817",
				"da0fa011bf7393db832c4ea281149f1c3268a844db0a47f1a65a5736916fd25e:86972:120:9:15:1648267507",
				"f79f9958357f600fe314859c456ceda9088f2b4f059fd4e4d636d73b518e2501:46775:120:9:8:1648266888",
				"73b6197c8de7c466147edbf4346346a57e8f16bd727d2f3ef71198efb1a9839e:127173:120:9:15:1648266883",
				"d30ac652f7a5bd47401323ee97ff7aab6e8d9255adced630080974b76133e544:172931:160:9:15:1648266876",
				"44c6cdce882d7102e6ea13cc8da36ea88351246abd8dd1b741e8da70e20dfd44:26078:120:9:5:1648266260",
				"ba09aa99b082cbb96bc70feafff1fb6fea5276519129633c53d90c6014a82bd5:120033:160:9:15:1648266256",
				"3c058357b7d70df299ffe0b3ad1f369a0f5cd0ad0c0aa58e8b72a6070fee0b34:209732:160:9:15:1648266249",
				"183b868d03239ebfd3c988dbbae45ed058ccae7120ab6536a99a392e8cb88d7d:81575:120:9:9:1648265640",
				"fc25d565ce168bf7d8d77804ea12b5a1e8fc48f9da1244b727b6014343c72307:110191:200:9:15:1648265635",
				"db6a8711f5869057c76ff7de80b0bc450573a8c7372137595e0b72f1a47d9613:161392:200:9:15:1648265628",
				"95da2ce32a223546619c70f568963913f9e4be19793453ce6f4234184dddc727:60777:120:9:7:1648264103",
				"236f5819be9026abdf5f634069fda7cd74728e79fa405d1012a5dfd1500b6bfc:95973:120:9:15:1648264099",
				"3bf35e65c5ab775efcc7bfa9a9f35f63c02b02afeef9d03fbab02714d6fc3158:93533:160:9:15:1648264094",
				"a5d72622bddd35187a847c08a832d40b2bac59957237faa6603e4516229e4125:64077:120:9:6:1648262879",
				"89f10ae90aad0fcb0c90625c74d3c037267bc2e54fb9c95d9c6e05e771761f47:94572:120:9:15:1648262874",
				"830ed9a41acbf9721483f150ca56d9090de3e3a8c30246be4dc978a25094fa7f:284194:200:9:15:1648262869",
				"4dfcded4964682d44ae0ee90c3c7b681e24ba39e7b102654725dc502cb15ca17:31976:120:9:6:1648256804",
				"8a71b8516ba29ba75d7fb9f96430cdab58a31a8e5c8472dd26ad2e6dfa272d08:115795:200:9:15:1648256800",
				"dbae619f72e413e65ab8b57f535e9da4ba0914819f1cb5ab9c587fac523d1bb1:411132:160:9:15:1648256793",
				"2f3677170c6ae0ebfa9a3bec999026b512dcdc1b825d7e56fb02e35a98235132:374980:120:9:1:1648254957",
				"532f0ad4f06aff2bd498b8a555672ed93b7f50248af9adb454a31de18c3c53ad:64876:120:9:7:1648253128",
				"e172e6bee69113273a636e9bb1bebc944fe6256c2a8041ec9ef06a05d4318dc8:86232:160:9:15:1648253123"
				],
			//Blocks per day
			blocksCount: [
					//Date:count
					"2022-02-24:86",
					"2022-02-25:89",
					"2022-02-26:106",
					"2022-02-27:81",
					"2022-02-28:85",
					"2022-03-01:61",
					"2022-03-02:72",
					"2022-03-03:83",
					"2022-03-04:81",
					"2022-03-05:82",
					"2022-03-06:85",
					"2022-03-07:83",
					"2022-03-08:72",
					"2022-03-09:90",
					"2022-03-10:77",
					"2022-03-11:80",
					"2022-03-12:88",
					"2022-03-13:65",
					"2022-03-14:78",
					"2022-03-15:79",
					"2022-03-16:85",
					"2022-03-17:75",
					"2022-03-18:104",
					"2022-03-19:95",
					"2022-03-20:95",
					"2022-03-21:82",
					"2022-03-22:73",
					"2022-03-23:109",
					"2022-03-24:107",
					"2022-03-25:74",
					"2022-03-26:11"
				]
			}
		},
		pool: {
			pathera : {
				ports : [
					//port:miners:workers
					"3333:375:2222",
					"7777:375:2222",
				],
				workers: 222495,
				miners: 222495,
				height: 433033,
				difficulty: 1403750086,
				lastblock : {
					lastMinerReward: 375000,
					height: 433032,
					hash: "d03c4fe23169485b04436db311d53ef5af5c1de615b9c0fda86b3b828259616f"
				},
				//  poolType:shares:totalDiff:totalBlocks:lastBlockFound
				totalShares : [ 
					"solo:2634316614637:34359165594475:2708:1648260674206",
					"prop:2634316614637:34359165594475:2708:1648260674206",
					"overall:34917568444105:34359165594475:135920:1648260674206",
				],
				//  poolType:shares:lastShare
				roundShares: [
					"solo:2634316614637:1648260674206",
					"prop:2634316614637:1648260674206",
					"overall:2634316614637:1648260674206",
				]
			},
			stats : {
				totalPayments: 51085,
				totalDonations: 0,
				totalMinersPaid: 6041,
				miners: 394,
				workers: 703,
				hashrate: 976310,
			}
		}
	};

		const ajv = new Ajv();
		const validate = ajv.compile(schema);
		validate(response);
		t.is(validate.errors, null);
	});
